From: Michael Davidsaver <mdavidsaver@bnl.gov>
Date: Fri, 1 Mar 2013 14:35:55 -0500
Subject: cross-build with mingw32

---
 configure/os/CONFIG.win32-x86-mingw.win32-x86-mingw      | 12 ++++++------
 configure/os/CONFIG_SITE.Common.win32-x86-mingw          | 14 ++++++++++++++
 configure/os/CONFIG_SITE.win32-x86-mingw.win32-x86-mingw |  2 +-
 3 files changed, 21 insertions(+), 7 deletions(-)

diff --git a/configure/os/CONFIG.win32-x86-mingw.win32-x86-mingw b/configure/os/CONFIG.win32-x86-mingw.win32-x86-mingw
index cfef76c..6ccf099 100644
--- a/configure/os/CONFIG.win32-x86-mingw.win32-x86-mingw
+++ b/configure/os/CONFIG.win32-x86-mingw.win32-x86-mingw
@@ -10,13 +10,13 @@
 include $(CONFIG)/CONFIG.gnuCommon
 
 # gcc, g++, ar, ld, and ranlib must be in user's path
-CC = gcc
-CCC = g++
-AR = ar -rc
-LD = ld -r
-RANLIB = ranlib
+CC = $(CMPLR_PREFIX)gcc
+CCC = $(CMPLR_PREFIX)g++
+AR = $(CMPLR_PREFIX)ar -rc
+LD = $(CMPLR_PREFIX)ld -r
+RANLIB = $(CMPLR_PREFIX)ranlib
 RES=.coff
-RCCMD = windres $(INCLUDES) $< $@
+RCCMD = $(CMPLR_PREFIX)windres $(INCLUDES) $< $@
 
 # No -fPIC avoids "-fPIC ignored for target (all code is position independent)"
 SHRLIB_CFLAGS =
diff --git a/configure/os/CONFIG_SITE.Common.win32-x86-mingw b/configure/os/CONFIG_SITE.Common.win32-x86-mingw
index 3ca50fe..8c0d9cb 100644
--- a/configure/os/CONFIG_SITE.Common.win32-x86-mingw
+++ b/configure/os/CONFIG_SITE.Common.win32-x86-mingw
@@ -9,3 +9,17 @@
 # to omit command-line editing and history support
 #COMMANDLINE_LIBRARY = READLINE
 
+CMPLR_PREFIX=i586-mingw32msvc-
+
+SHARED_LIBRARIES=NO
+STATIC_BUILD=YES
+
+# No -fPIC avoids "-fPIC ignored for target (all code is position independent)"
+SHRLIB_CFLAGS =
+SHRLIB_LDFLAGS = -shared -Wl,--out-implib,$(LIB_PREFIX)$*$(LIB_SUFFIX)
+LOADABLE_SHRLIB_LDFLAGS = -shared -Wl,--out-implib,$(LIB_PREFIX)$*$(LIB_SUFFIX)
+
+# Override linking with gcc library from CONFIG.gnuCommon
+GNU_LDLIBS_YES =
+
+OP_SYS_LDLIBS = -lws2_32
diff --git a/configure/os/CONFIG_SITE.win32-x86-mingw.win32-x86-mingw b/configure/os/CONFIG_SITE.win32-x86-mingw.win32-x86-mingw
index 7793d03..4c41fbd 100644
--- a/configure/os/CONFIG_SITE.win32-x86-mingw.win32-x86-mingw
+++ b/configure/os/CONFIG_SITE.win32-x86-mingw.win32-x86-mingw
@@ -8,7 +8,7 @@
 
 # Uncomment the following settings for MinGW_w32 releases
 # <MinGW directory>/bin should be in your path
-#CMPLR_PREFIX=i686-w64-mingw32-
+CMPLR_PREFIX=i586-mingw32msvc-
 #CC = $(CMPLR_PREFIX)gcc
 #CCC = $(CMPLR_PREFIX)g++
 #AR = $(CMPLR_PREFIX)ar -rc
